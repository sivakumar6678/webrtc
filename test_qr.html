<!DOCTYPE html>
<html>
<head>
    <title>QR Code Test</title>
</head>
<body>
    <h1>QR Code Test</h1>
    <div id="qr-container"></div>
    <div id="status"></div>

    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.4/build/qrcode.min.js"></script>
    <script>
        const statusDiv = document.getElementById('status');
        const qrContainer = document.getElementById('qr-container');

        function updateStatus(message) {
            statusDiv.textContent = message;
            console.log(message);
        }

        function testQRCode() {
            updateStatus('Testing QR Code generation...');
            
            if (typeof QRCode === 'undefined') {
                updateStatus('❌ QRCode library not loaded');
                return;
            }

            const testUrl = 'https://example.com/join/test-room-123';
            
            QRCode.toDataURL(testUrl, { width: 256, margin: 2 })
                .then(dataUrl => {
                    updateStatus('✅ QR Code generated successfully!');
                    const img = document.createElement('img');
                    img.src = dataUrl;
                    img.style.border = '1px solid #ccc';
                    qrContainer.appendChild(img);
                })
                .catch(err => {
                    updateStatus('❌ QR Code generation failed: ' + err.message);
                });
        }

        // Test after a short delay
        setTimeout(testQRCode, 1000);
    </script>
</body>
</html>